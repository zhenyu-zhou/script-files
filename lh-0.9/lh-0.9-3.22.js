LH_start=+(new Date());(function(a){"use strict";if(a.LH!==undefined&&a.LH.version!==undefined){return}var e="0.9",d=(window.location.protocol||document.location.protocol||"http:")+"//lh.secure.yahoo.com/lhbeam-"+e,c="root",b={beacon_url:d,timelines:{},tags:{},beaconNumber:0,navtimingBeaconSent:false,beaconTimeout:10,onloadHandler:function(){setTimeout(b.onloadWorker,b.beaconTimeout)},onloadWorker:function(){var f=b.getPerformance();if(f.timing&&f.timing.loadEventEnd===0){setTimeout(b.onloadWorker,b.beaconTimeout)}else{LH.beacon()}},getBeaconUrl:function(){var f=this.beacon_url,g=a.document;if(!f){return f}f+=((f.indexOf("?")>-1)?"&":"?")+"_uuid="+(this.uuid===null||this.uuid===undefined?"":encodeURIComponent(this.uuid));f+="&_sid="+(this.spaceid===null||this.spaceid===undefined?"":encodeURIComponent(this.spaceid));f+="&_sip="+(this.serverip===null||this.serverip===undefined?"":encodeURIComponent(this.serverip));if(this["crumb"]){f+="&_crumb="+encodeURIComponent(this["crumb"])}if(this["pvid"]){f+="&_pvid="+encodeURIComponent(this["pvid"])}if(this.offset>0){f+="&offset="+this.offset}f+=((f.indexOf("?")>-1)?"&":"?")+"u="+encodeURIComponent(g.URL.replace(/#.*/,""));return f},metrics:[],checkElemInMetrics:function(g){if(!b.metrics||b.metrics.length==0){return true}for(var f in b.metrics){if(g===b.metrics[f]){return true}}return false},timelineFactory:function(f){return{state:0,name:f,startTime:parseInt(b.getPerformance().now()),dirty:false,tags:{entries:{},toString:function(){var g="",h;for(h in this.entries){if(!this.entries.hasOwnProperty(h)){continue}if(this.entries[h]===true){g+="|t:"+h}else{g+="|t:"+h+","+this.entries[h]}}return g}},type:{mark:{dirty:false,entries:{},toString:function(){var h="",g,j;for(g in this.entries){if(!this.entries.hasOwnProperty(g)||!b.checkElemInMetrics(g)){continue}h+="|m:"+g+",";for(j in this.entries[g]){h+=this.entries[g][j].startTime+";"}}return h}},measure:{dirty:false,entries:{},toString:function(){var h="",g,j;for(g in this.entries){if(!this.entries.hasOwnProperty(g)||!b.checkElemInMetrics(g)){continue}h+="|s:"+g+",";for(j in this.entries[g]){h+=this.entries[g][j].startTime+","+this.entries[g][j].duration+";"}}return h}},custom:{dirty:false,entries:{},toString:function(){var h="",g,j;for(g in this.entries){if(!this.entries.hasOwnProperty(g)||!b.checkElemInMetrics(g)){continue}h+="|r:"+g+",";for(j in this.entries[g]){h+=this.entries[g][j].type+","+this.entries[g][j].startTime+","+this.entries[g][j].duration+";"}}return h}}},toString:function(g){if(!g){g=""}return"c="+this.name+","+this.state+g+this.tags.toString()+g+this.type.mark.toString()+g+this.type.measure.toString()+g+this.type.custom.toString()}}},navTiming:function(){var h,l=b.getPerformance(),g,k,j,f;if(l&&l.timing&&l.navigation){g=l.navigation;k=l.timing;f=k.navigationStart;j={navT:g.type,navS:f,fetS:k.fetchStart-f,dluS:k.domainLookupStart-f,dluE:k.domainLookupEnd-f,conS:k.connectStart-f,conE:k.connectEnd-f,reqS:k.requestStart-f,resS:k.responseStart-f,resE:k.responseEnd-f,domL:k.domLoading-f,domI:k.domInteractive-f,domS:k.domContentLoadedEventStart-f,domE:k.domContentLoadedEventEnd-f,domC:k.domComplete-f,lodS:k.loadEventStart-f,lodE:k.loadEventEnd-f};if(typeof k.linkNegotiationStart!=="undefined"&&k.linkNegotiationStart!==0){j.lnkS=k.linkNegotiationStart-f}if(typeof k.linkNegotiationEnd!=="undefined"&&k.linkNegotiationEnd!==0){j.lnkE=k.linkNegotiationEnd-f}if(k.unloadEventStart!==0){j.uldS=k.unloadEventStart-f;j.uldE=k.unloadEventEnd-f}if(k.redirectStart!==0){j.redC=g.redirectCount;j.redS=k.redirectStart-f;j.redE=k.redirectEnd-f}if(typeof k.secureConnectionStart==="number"){j.secS=k.secureConnectionStart>0?Math.max(1,k.secureConnectionStart-f):0}j.toString=function(m){var n="n=",i=0,o;if(b.hasOwnProperty("tags")){for(o in b.tags){if(!b.tags.hasOwnProperty(o)){continue}n+=(i>0?"|":"")+"t:";if(b.tags[o]===true){n+=o}else{n+=o+","+b.tags[o]}i++}}for(h in this){if(!this.hasOwnProperty(h)||h==="toString"){continue}n+=(i>0?"|":"")+encodeURIComponent(h)+((this[h]===null||this[h]===undefined||parseInt(this[h])<=0)?"":","+encodeURIComponent(this[h]));i++}return n}}return j},offset:0,myNow:function(){if(b.offset==0){b.offset=LH_start}return(+(new Date()))-b.offset},getPerformance:function(){var f=a.performance||a.webkitPerformance||a.msPerformance||a.mozPerformance||a.Performance||{};if(typeof f.now!=="function"&&typeof f.webkitNow!=="function"&&typeof f.msNow!=="function"&&typeof f.mozNow!=="function"){f.now=b.myNow}f.now=f.now||f.webkitNow||f.msNow||f.mozNow;return f},getQueryParams:function(){var i={},h,g=/[?&]?([^=]+)=([^&]*)/g,f=window.location.search||document.location.search;f=f.split("+").join(" ");while(h=g.exec(f)){i[decodeURIComponent(h[1])]=decodeURIComponent(h[2])}return i}};if(!b.timelines.hasOwnProperty(c)){b.timelines[c]=b.timelineFactory(c)}a.LH={t_start:LH_start,version:e,isInitialized:false,init:function(g){var h,j,f=b.getQueryParams();if(!g){g={}}for(h in g){if(g.hasOwnProperty(h)&&typeof g[h]!=="function"){b[h]=g[h]}}for(h in f){if(f.hasOwnProperty(h)&&typeof f[h]!=="function"){b[h]=f[h]}}LH.isInitialized=true;if(typeof g.log!=="undefined"){this.log=g.log}if(!this.log){this.log=function(i,k,n){}}j=b.getPerformance();if(j.timing&&j.timing.loadEventEnd==0){if(a.addEventListener){a.addEventListener("load",b.onloadHandler,false)}else{if(a.attachEvent){a.attachEvent("onload",b.onloadHandler)}}}else{b.onloadHandler()}return this},metrics:function(f){if(typeof f==="string"){b.metrics=f.split(",")}else{if(f instanceof Array){b.metrics=f}}},newState:function(f){if(f!==undefined){if(!b.timelines.hasOwnProperty(f)){throw new TypeError("Context not found")}b.timelines.context.state++}if(f!=c){b.timelines[c].state++}},newContext:function(f){if(!b.timelines.hasOwnProperty(f)){b.timelines[f]=b.timelineFactory(f)}},tag:function(i,h){var j,g=c,f;if(h){j=h.val}if(h&&typeof h.context==="string"){g=h.context}f=b.timelines[g];if(j!==undefined){f.tags.entries[i]=j}else{f.tags.entries[i]=true}},mark:function(g,j){var i=c,h,k,f,l;if(!g){throw new TypeError("Not enough arguments")}if(j&&typeof j.context==="string"){i=j.context}h=b.timelines[i];k=h.type.mark,f=k.entries;if(!f[g]){f[g]=[]}l={duration:0,entryType:"mark",name:g,startTime:parseInt(b.getPerformance().now())};f[g].push(l);k.dirty=true;h.dirty=true;return l},measure:function(h,j){var l,q,k=c,p,m,o,i=[],g={name:h,entryType:"measure"},f,n;if(j){l=typeof j.startMark==="string"?j.startMark:l;q=typeof j.endMark==="string"?j.endMark:q;m=typeof j.startMark==="object"?j.startMark:null;o=typeof j.endMark==="object"?j.endMark:null;k=typeof j.context==="string"?j.context:k}p=b.timelines[k];f=p.type.measure;n=f.entries;if(!h){throw new TypeError("Not enough arguments")}if((q||o)&&!(l||m)){throw new SyntaxError("No startMark provided with endMark")}if(l||m){if(l){i=p.type.mark.entries[l]}if(!m&&i instanceof Array&&i.length>0){m=i[i.length-1]}else{if(!m){throw new SyntaxError("startMark not found")}}g.startTime=m.startTime;if(q||o){if(q){i=p.type.mark.entries[q]}if(!o&&i instanceof Array&&i.length>0){o=i[i.length-1]}else{if(!o){throw new SyntaxError("endMark not found")}}g.duration=o.startTime-m.startTime}else{g.duration=parseInt(b.getPerformance().now())-m.startTime}}else{g.startTime=0;g.duration=parseInt(b.getPerformance().now())}if(!n[h]){n[h]=[]}n[h].push(g);f.dirty=true;p.dirty=true;return g},record:function(g,l,j){var i=c,h,f,k;if(j&&typeof j.context==="string"){i=j.context}h=b.timelines[i];f=h.type.custom;k=f.entries;if(!k[g]){k[g]=[]}k[g].push(l);f.dirty=true;h.dirty=true;return l},clearMarks:function(i){var h=c,g,j,f;if(i&&typeof i.context==="string"){h=i.context}g=b.timelines[h];j=g.type.mark,f=j.entries;if(i&&typeof i.name==="string"){if(f[name]){f[name].length=0;j.dirty=true;g.dirty=true}}else{j.entries={};j.dirty=true;g.dirty=true}},clearMeasures:function(i){var h=c,g,j,f;if(i&&typeof i.context==="string"){h=i.context}g=b.timelines[h];j=g.type.measure,f=j.entries;if(i&&typeof i.name==="string"){if(f[name]){f[name].length=0;j.dirty=true;g.dirty=true}}else{j.entries={};j.dirty=true;g.dirty=true}},clearCustomEntries:function(i){var h=c,g,f,j;if(i&&typeof i.context==="string"){h=i.context}g=b.timelines[h];f=g.type.custom,j=f.entries;if(i&&typeof i.name==="string"){if(j[name]){j[name].length=0;f.dirty=true;g.dirty=true}}else{f.entries={};f.dirty=true;g.dirty=true}},clearTags:function(h){var g=c,f;if(h&&typeof h.context==="string"){g=h.context}f=b.timelines[g];if(h&&typeof h.name==="string"){if(f.tags.entries[name]){delete f.tags.entries[name];f.dirty=true}}else{f.tags.entries={};f.dirty=true}},beacon:function(h){var s,t,q,u,f,j=c,l,o,r,n,m,g,k=b.LH_debug&&(b.LH_debug===true||b.LH_debug==="true"||b.LH_debug==="1");if(b.hasOwnProperty("spaceid")){s=b.spaceid}if(b.hasOwnProperty("serverip")){t=b.serverip}if(b.hasOwnProperty("pvid")){q=b.pvid}if(b.hasOwnProperty("crumb")){u=b.crumb}if(h&&h.hasOwnProperty("spaceid")){b.spaceid=h.spaceid}if(h&&h.hasOwnProperty("serverip")){b.serverip=h.serverip}if(h&&h.hasOwnProperty("pvid")){b.pvid=h.pvid}if(h&&h.hasOwnProperty("crumb")){b.crumb=h.crumb}f=b.getBeaconUrl();if(s){b.spaceid=s}if(t){b.serverip=t}if(q){b.pvid=q}if(u){b.crumb=u}if(k){g=b.getPerformance();if(g.getEntriesByType){l=g.getEntriesByType("resource");console.log("Resources present: "+l.length);for(m in l){if(l[m].name.indexOf("lh-")>=0||l[m].name.indexOf("lighthouse")>=0){console.log("Time for lighthouse resource",l[m])}}}}if(!f){return this}if(!b.navtimingBeaconSent){o=b.navTiming();if(o&&o.lodE>0){f+=((f.indexOf("?")>-1)?"&":"?")+b.navTiming().toString();b.navtimingBeaconSent=true}}if(h&&typeof h.context==="string"){j=h.context}r=b.timelines[j];f+=((f.indexOf("?")>-1)?"&":"?")+r.toString();if(k){console.log("beacon url: "+f)}b.beaconNumber++;n=new Image();if(k){n.onload=n.onerror=n.onabort=function(p){var i=p;return function(){var w=LH.mark("LH.endBeacon"),v=LH.measure("LH.beacon",{startMark:i,endMark:w});console.log("beacon response received",v)}}(LH.mark("LH.startBeacon"))}n.src=f;if(h&&h.clearMarks){this.clearMarks()}if(h&&h.clearMeasures){this.clearMeasures()}if(h&&h.clearCustomEntries){this.clearCustomEntries()}if(h&&h.clearTags){this.clearTags()}return this}}}(window));

