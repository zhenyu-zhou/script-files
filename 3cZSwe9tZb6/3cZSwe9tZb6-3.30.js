/*!CK:1469256625!*//*1425269320,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["QPKpp"]); }

__d("ApiPageFields",[],function(a,b,c,d,e,f){e.exports={ABOUT:"about",ACCESS_TOKEN:"access_token",ADMIN_SETTINGS:"admin_settings",ADMINS:"admins",AFFILIATION:"affiliation",AGENCIES:"agencies",ALBUMS:"albums",APP_ID:"app_id",APP_LINKS:"app_links",ARTISTS_WE_LIKE:"artists_we_like",ATTIRE:"attire",AWARDS:"awards",BAND_INTERESTS:"band_interests",BAND_MEMBERS:"band_members",BEST_PAGE:"best_page",BIO:"bio",BIRTHDAY:"birthday",BLOCKED:"blocked",BOOKING_AGENT:"booking_agent",BUILT:"built",BUSINESS:"business",BUSINESSPROJECTS:"businessprojects",BUSINESSSETTINGLOGS:"businesssettinglogs",CAN_POST:"can_post",CATEGORY:"category",CATEGORY_LIST:"category_list",CHECKINS:"checkins",COMMERCE_MERCHANT_SETTINGS:"commerce_merchant_settings",COMPANY_OVERVIEW:"company_overview",CONTACT_ADDRESS:"contact_address",CONTEXT:"context",CONVERSATIONS:"conversations",COUNTRY_PAGE_LIKES:"country_page_likes",COVER:"cover",CULINARY_TEAM:"culinary_team",CURRENT_LOCATION:"current_location",DESCRIPTION:"description",DESCRIPTION_HTML:"description_html",DIRECTED_BY:"directed_by",DRAFT_POSTS:"draft_posts",EMAILS:"emails",ENGAGEMENT:"engagement",EVENTS:"events",FEATURES:"features",FEED:"feed",FOOD_STYLES:"food_styles",FOUNDED:"founded",GENERAL_INFO:"general_info",GENERAL_MANAGER:"general_manager",GENRE:"genre",GLOBAL_BRAND_CHILDREN:"global_brand_children",GLOBAL_BRAND_PAGE_NAME:"global_brand_page_name",GLOBAL_BRAND_PARENT_PAGE:"global_brand_parent_page",GLOBAL_BRAND_ROOT_ID:"global_brand_root_id",HAS_ADDED_APP:"has_added_app",HOMETOWN:"hometown",HOURS:"hours",ID:"id",IMPRESSUM:"impressum",INFLUENCES:"influences",INSIGHTS:"insights",IS_COMMUNITY_PAGE:"is_community_page",IS_PERMANENTLY_CLOSED:"is_permanently_closed",IS_PUBLISHED:"is_published",IS_UNCLAIMED:"is_unclaimed",IS_VERIFIED:"is_verified",KEYWORDS:"keywords",LIKES:"likes",LINK:"link",LINKS:"links",LOCATION:"location",LOCATIONS:"locations",MEMBERS:"members",MILESTONES:"milestones",MISSION:"mission",MPG:"mpg",NAME:"name",NAME_WITH_LOCATION_DESCRIPTOR:"name_with_location_descriptor",NETWORK:"network",NEW_LIKE_COUNT:"new_like_count",NOTES:"notes",NOTIFICATIONS:"notifications",OFFER_ELIGIBLE:"offer_eligible",OFFERS:"offers",PARENT_PAGE:"parent_page",PARKING:"parking",PAYMENT_OPTIONS:"payment_options",PERSONAL_INFO:"personal_info",PERSONAL_INTERESTS:"personal_interests",PHARMA_SAFETY_INFO:"pharma_safety_info",PHONE:"phone",PHOTOS:"photos",PICTURE:"picture",PLOT_OUTLINE:"plot_outline",POSTS:"posts",PRESS_CONTACT:"press_contact",PRICE_RANGE:"price_range",PRODUCED_BY:"produced_by",PRODUCT_PUBLISHERS:"product_publishers",PRODUCTS:"products",PROMOTABLE_POSTS:"promotable_posts",PROMOTION_ELIGIBLE:"promotion_eligible",PROMOTION_INELIGIBLE_REASON:"promotion_ineligible_reason",PUBLIC_TRANSIT:"public_transit",QUESTIONS:"questions",RATINGS:"ratings",RECORD_LABEL:"record_label",RELEASE_DATE:"release_date",RESTAURANT_SERVICES:"restaurant_services",RESTAURANT_SPECIALTIES:"restaurant_specialties",ROLES:"roles",RTB_DYNAMIC_POSTS:"rtb_dynamic_posts",SCHEDULE:"schedule",SCHEDULED_POSTS:"scheduled_posts",SCREENNAMES:"screennames",SCREENPLAY_BY:"screenplay_by",SEASON:"season",SETTINGS:"settings",STARRING:"starring",STATUSES:"statuses",STORE_NUMBER:"store_number",STUDIO:"studio",SUBSCRIBED_APPS:"subscribed_apps",TABS:"tabs",TAGGED:"tagged",TALKING_ABOUT_COUNT:"talking_about_count",THREADS:"threads",TOPIC:"topic",UNREAD_MESSAGE_COUNT:"unread_message_count",UNREAD_NOTIF_COUNT:"unread_notif_count",UNSEEN_MESSAGE_COUNT:"unseen_message_count",USERNAME:"username",USERPERMISSIONS:"userpermissions",VIDEO_COLLECTION:"video_collection",VIDEOS:"videos",VOIP_INFO:"voip_info",WEBSITE:"website",WERE_HERE_COUNT:"were_here_count",WRITTEN_BY:"written_by"};},null);
__d("PageAdminTypes",[],function(a,b,c,d,e,f){e.exports={MANAGER:"MANAGER",CONTENT_CREATOR:"CONTENT_CREATOR",MODERATOR:"MODERATOR",ADVERTISER:"ADVERTISER",INSIGHTS_ANALYST:"INSIGHTS_ANALYST"};},null);
__d("ContextualBlind",["Event","Animation","Arbiter","DOM","Rect","Vector","$","cx","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=0,q=1,r=.8,s=500;function t(){"use strict";}t.prototype.$ContextualBlind0=function(){"use strict";this.$ContextualBlind1&&i.unsubscribe(this.$ContextualBlind1);this.$ContextualBlind1=null;this.$ContextualBlind2=[];this.$ContextualBlind3&&this.$ContextualBlind3.remove();this.$ContextualBlind3=null;this.$ContextualBlind4&&j.remove(this.$ContextualBlind4);this.$ContextualBlind5=false;};t.prototype.show=function(u,v,w,x,y,z,aa,ba){"use strict";if(aa==null)aa=r;ba=ba||p;this.hide();var ca=(ba===p)?"_2xgb":"_2xgc";for(var da=0;da<4;da++)this.$ContextualBlind2.push(j.create('div',{className:ca,style:'opacity:'+aa}));j.appendContent(document.body,this.$ContextualBlind2);if(z!==false){ca=(ba===p)?"_2xgd":"_2xge";this.$ContextualBlind4=j.create('div',{className:ca});j.appendContent(document.body,this.$ContextualBlind4);}var ea=o(this.updatePosition,this,u,v,w,x,y);ea();this.$ContextualBlind1=i.subscribe('reflow',ea);this.$ContextualBlind3=g.listen(window,'resize',ea);this.$ContextualBlind5=true;};t.prototype.fadeIn=function(u,v,w,x,y,z,aa,ba){"use strict";ba=ba||s;if(aa==null)aa=r;this.show(u,v,w,x,y,z,aa,p);if(this.$ContextualBlind5)return;for(var ca=0;ca<this.$ContextualBlind2.length;ca++){var da=this.$ContextualBlind2[ca];new h(da).duration(ba).from('opacity',0).to('opacity',aa).go();}};t.prototype.hide=function(){"use strict";this.$ContextualBlind2&&this.$ContextualBlind2.forEach(j.remove);this.$ContextualBlind0();};t.prototype.fadeOut=function(){"use strict";for(var u=0;u<this.$ContextualBlind2.length;u++){var v=this.$ContextualBlind2[u];new h(v).duration(s).from('opacity',r).to('opacity',0).ondone(j.remove.bind(null,v)).go();}this.$ContextualBlind0();};t.prototype.$ContextualBlind6=function(u,v){"use strict";v.getPositionVector().setElementPosition(u);v.getDimensionVector().setElementDimensions(u);};t.prototype.updatePosition=function(u,v,w,x,y){"use strict";var z=l.getDocumentDimensions().y,aa=k.getElementBounds(m(u));aa=new k(aa.t-(v||0),aa.r+(w||0),aa.b+(x||0),aa.l-(y||0),aa.domain);var ba=document,ca=(ba&&ba.documentElement&&ba.documentElement.scrollWidth)||(ba&&ba.body&&ba.body.scrollWidth)||0;this.$ContextualBlind6(this.$ContextualBlind2[0],new k(0,ca,aa.t,0,'document'));this.$ContextualBlind6(this.$ContextualBlind2[1],new k(aa.t,ca,aa.b,aa.r,'document'));this.$ContextualBlind6(this.$ContextualBlind2[2],new k(aa.b,ca,z,0,'document'));this.$ContextualBlind6(this.$ContextualBlind2[3],new k(aa.t,aa.l,aa.b,0,'document'));if(this.$ContextualBlind4)this.$ContextualBlind6(this.$ContextualBlind4,aa);};t.STYLE_LIGHT=p;t.STYLE_DARK=q;e.exports=t;},null);
__d("ContextualLayerBlind",["ContextualBlind","cx","CSS"],function(a,b,c,d,e,f,g,h,i){var j={isModal:false,opacity:.3,paddingTop:8,paddingRight:8,paddingBottom:8,paddingLeft:8,style:g.STYLE_DARK};function k(l,m){"use strict";m=Object.assign({},j,m);this.$ContextualLayerBlind0=m.isModal;this.$ContextualLayerBlind1=l;this.$ContextualLayerBlind2=m.opacity;this.$ContextualLayerBlind3=m.paddingTop;this.$ContextualLayerBlind4=m.paddingRight;this.$ContextualLayerBlind5=m.paddingBottom;this.$ContextualLayerBlind6=m.paddingLeft;this.$ContextualLayerBlind7=m.style;}k.prototype.enable=function(){"use strict";this.$ContextualLayerBlind8=[this.$ContextualLayerBlind1.subscribe(['show','reposition'],this.$ContextualLayerBlind9.bind(this)),this.$ContextualLayerBlind1.subscribe('hide',this.$ContextualLayerBlinda.bind(this))];i.addClass(this.$ContextualLayerBlind1.getRoot(),"_4746");this.$ContextualLayerBlindb=new g();};k.prototype.disable=function(){"use strict";this.$ContextualLayerBlinda();i.removeClass(this.$ContextualLayerBlind1.getRoot(),"_4746");while(this.$ContextualLayerBlind8.length)this.$ContextualLayerBlind8.pop().unsubscribe();this.$ContextualLayerBlind8=null;this.$ContextualLayerBlindb=null;};k.prototype.$ContextualLayerBlind9=function(){"use strict";if(this.$ContextualLayerBlind1.isShown()){var l=this.$ContextualLayerBlind1.getContext();this.$ContextualLayerBlindb.show(l,this.$ContextualLayerBlind3,this.$ContextualLayerBlind4,this.$ContextualLayerBlind5,this.$ContextualLayerBlind6,this.$ContextualLayerBlind0,this.$ContextualLayerBlind2,this.$ContextualLayerBlind7);}};k.prototype.$ContextualLayerBlinda=function(){"use strict";this.$ContextualLayerBlindb.hide();};e.exports=k;},null);
__d("AdsLoadState",["keyMirror"],function(a,b,c,d,e,f,g){'use strict';var h=g({DELETING:null,ERROR:null,LOADED:null,LOADING:null,NOT_LOADED:null,PENDING_WRITE:null});e.exports=h;},null);
__d("keyMirrorRecursive",["invariant"],function(a,b,c,d,e,f,g){'use strict';function h(k,l){return i(k,l);}function i(k,l){var m={},n;g(j(k));for(n in k){if(!k.hasOwnProperty(n))continue;var o=k[n],p=l?l+'.'+n:n;if(j(o)){o=i(o,p);}else o=p;m[n]=o;}return m;}function j(k){return k instanceof Object&&!Array.isArray(k);}e.exports=h;},null);
__d("AdsAssetSectionType",["keyMirrorRecursive"],function(a,b,c,d,e,f,g){'use strict';var h=g({BOOKMARKED:'',OWNED:'',SEARCH:'',UNOWNED:''});e.exports=h;},null);
__d("AdsGenericFilterOperator",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({IN_RANGE:null,CONTAIN:null,EQUAL:null,GREATER_THAN:null,IN:null,NOT_IN_RANGE:null,NOT_CONTAIN:null,NOT_IN:null,NOT_EQUAL:null,LESS_THAN:null});e.exports=h;},null);
__d("AdsGenericFilterFieldType",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({NUMBER:null,CURRENCY:null,NUMBER_RANGE:null,NUMBER_SET:null,STRING:null,STRING_SET:null,DATE_RANGE:null});e.exports=h;},null);
__d("LegacyImmutableObject",["Object.assign","invariant","isNode","mergeHelpers"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=j.checkMergeObjectArgs,l=j.isTerminal,m;function n(p){h(p instanceof m);}m=function p(q){g(this,q);};m.set=function(p,q){n(p);var r=new m(p);g(r,q);return r;};m.setField=function(p,q,r){var s={};s[q]=r;return m.set(p,s);};m.setDeep=function(p,q){n(p);return o(p,q);};function o(p,q){k(p,q);var r={},s=Object.keys(p);for(var t=0;t<s.length;t++){var u=s[t];if(!q.hasOwnProperty(u)){r[u]=p[u];}else if(l(p[u])||l(q[u])){r[u]=q[u];}else r[u]=o(p[u],q[u]);}var v=Object.keys(q);for(t=0;t<v.length;t++){var w=v[t];if(p.hasOwnProperty(w))continue;r[w]=q[w];}return (p instanceof m||q instanceof m)?new m(r):r;}e.exports=m;},null);
__d("AdsGenericFilter",["AdsGenericFilterOperator","AdsGenericFilterFieldType","LegacyImmutableObject","getObjectValues","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j(g),m={},n='\u00A0';for(var o in i)if(i.hasOwnProperty(o))q[o]=i[o];var p=i===null?null:i.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=i;function q(r,s,t){"use strict";var u=t,v=t&&Array.isArray(t);if(t==null||(typeof t==='number'&&isNaN(t)))throw new Error('invalid filter value');if(v&&t.length>1){t=t.slice(0);t.sort();}m.field=r;m.operator=s;m.value=u;m.key=r.toString()+n+s+n+(v?t.join(n):t);i.call(this,m);}q.prototype.toString=function(){"use strict";return this.key;};q.prototype.toAPI=function(){"use strict";return this.isComplete()?{field:this.field.name,operator:this.operator,value:this.value}:null;};q.prototype.isComplete=function(){"use strict";switch(this.operator){case g.IN:case g.NOT_IN:return true;default:return this.value!=='';}};e.exports=q;},null);
__d("AdsGenericFilterField",["AdsGenericFilterFieldType","LegacyImmutableObject","getObjectValues","invariant"],function(a,b,c,d,e,f,g,h,i,j){var k={},l=i(g);for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(p,q,r){"use strict";k.name=p;k.type=q;if(r){k.level=r;k.key=p+'-'+q+'-'+r;}else k.key=p+'-'+q;h.call(this,k);}o.prototype.toString=function(){"use strict";return this.key;};e.exports=o;},null);
__d("AdsGenericFilterSet",["LegacyImmutableObject"],function(a,b,c,d,e,f,g){var h={},i=[],j=';';for(var k in g)if(g.hasOwnProperty(k))m[k]=g[k];var l=g===null?null:g.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=g;function m(n){"use strict";var o,p=[];switch(n.length){case 0:throw Error('AdsGenericFilterSet contains no filter');case 1:p.push(n[0]);o=n[0].key;break;default:var q={};i.length=0;n.forEach(function(r){var s=r.key;if(!(s in q)){p.push(r);q[s]=true;i.push(s);}});i.sort();o=i.join(j);}h.values=p;h.key='('+o+')';g.call(this,h);}m.prototype.toString=function(){"use strict";return this.key;};m.prototype.toAPI=function(){"use strict";var n=this.values,o=[];for(var p=0;p<n.length;p++){var q=n[p].toAPI();if(q!==null)o.push(q);}return o;};m.prototype.getCompleteFilters=function(){"use strict";var n=this.values.filter(function(o){return o.isComplete();});return n.length?new this.constructor(n):(void 0);};e.exports=m;},null);
__d("AdsGenericFilterSetUtil",["AdsGenericFilterOperator","invariant"],function(a,b,c,d,e,f,g,h){function i(v,w){if(v&&v.length>=w.length){var x={},y=true;v.forEach(function(z){x[z]=true;});w.some(function(z){if(!(z in x)){y=false;return true;}});return y;}else return false;}function j(v,w){if(!v)return w;var x=[],y={};h(v.field.key===w.field.key&&v.operator===w.operator);h(Array.isArray(v.value)&&Array.isArray(w.value));v.value.forEach(function(z){y[z]=true;x.push(z);});w.value.forEach(function(z){if(!y.hasOwnProperty(z))x.push(z);});return x.length?new v.constructor(v.field,w.operator,x):null;}function k(v,w){if(!v)return null;var x=[],y={};h(v.field.key===w.field.key&&v.operator===w.operator);w.value.forEach(function(z){y[z]=true;});v.value.forEach(function(z){if(!y.hasOwnProperty(z))x.push(z);});return x.length?new v.constructor(v.field,w.operator,x):null;}function l(v,w,x){var y;v.values.some(function(ea,fa){if(ea.field.key===w.key){y=fa;return true;}});if(y==null)return v;var z=v.values.slice(0),aa=z[y],ba=false,ca=aa.value.filter(function(ea){var fa=x.indexOf(ea)>-1;ba=fa||ba;return !fa;});if(!ba)return v;var da=new aa.constructor(aa.field,aa.operator,ca);z[y]=da;return new v.constructor(z);}function m(v,w){if(v.key===w.key)return true;if(v.values.length<w.values.length)return false;var x={},y={},z={},aa={};v.values.forEach(function(ca){var da=ca.key,ea=ca.field.key;switch(ca.operator){case g.IN:z[ea]=ca.value;break;case g.NOT_IN:aa[ea]=ca.value;break;default:x[da]=true;y[ea]=true;}});var ba=true;w.values.some(function(ca){var da=ca.key,ea=ca.value,fa=ca.field,ga=!ca.isComplete();switch(ca.operator){case g.IN:if(!i(z[fa],ea)){ba=false;return true;}break;case g.NOT_IN:if(!i(aa[fa],ea)){ba=false;return true;}break;default:if(!x[da]&&!(ga&&y[fa])){ba=false;return true;}}});return ba;}function n(v,w){return v.key===w.key;}function o(v,w){var x={},y={};v.values.forEach(function(ca){var da=ca.field.key;switch(ca.operator){case g.IN:case g.NOT_IN:x[da]=ca;break;default:y[da]=ca;}});w.values.forEach(function(ca){var da=ca.field.key;switch(ca.operator){case g.IN:case g.NOT_IN:if(x[da]&&x[da].operator!==ca.operator)x[da]=(void 0);x[da]=j(x[da],ca);break;default:y[da]=ca;}});var z=[];for(var aa in x)if(x[aa]&&x.hasOwnProperty(aa))z.push(x[aa]);for(var ba in y)if(y[ba]&&y.hasOwnProperty(ba))z.push(y[ba]);return new v.constructor(z);}function p(v,w){var x={},y={},z={};v.values.forEach(function(da){var ea=da.key,fa=da.field.key;switch(da.operator){case g.IN:case g.NOT_IN:x[fa]=da;break;default:y[ea]=da;z[fa]=ea;}});w.values.forEach(function(da){var ea=da.key,fa=da.field.key;switch(da.operator){case g.IN:case g.NOT_IN:x[fa]=k(x[fa],da);break;default:delete y[ea];if(!da.isComplete())delete y[z[fa]];}});var aa=[];for(var ba in x)if(x[ba]&&x.hasOwnProperty(ba))aa.push(x[ba]);for(var ca in y)if(y[ca]&&y.hasOwnProperty(ca))aa.push(y[ca]);return aa.length?new v.constructor(aa):null;}function q(v,w){return v.values.filter(function(x){return x.field.key===w.key;});}function r(v,w){var x=v.values.filter(function(y){return y.field.key!==w.key;});return x.length?new v.constructor(x):null;}function s(v,w){var x=w.map(function(z){return z.key;}),y=v.values.filter(function(z){return x.indexOf(z.field.key)!==-1;});return y.length?new v.constructor(y):null;}function t(v,w){var x=q(v,w);if(!x||x.length===0)return null;h(x.length===1);var y=x[0];return y.value;}var u={contains:m,exclude:p,excludeFiltersByField:r,excludeFiltersArrayValueByField:l,getFiltersByField:q,getFilterValueByField:t,includeFiltersByFields:s,matchesExactly:n,mergeByField:o};e.exports=u;},null);
__d("TextInputFilter.brands",["AdsGenericFilter","AdsGenericFilterField","AdsGenericFilterOperator","Keys","React"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=k,m=l.PropTypes,n=200,o=k.createClass({displayName:"TextInputFilter",propTypes:{onChange:m.func.isRequired,value:m.string,placeholder:m.string,filterField:m.instanceOf(h).isRequired,hasCustomValue:m.bool,changeDebounceMS:m.number},getDefaultProps:function(){return {hasCustomValue:false,changeDebounceMS:n};},getInitialState:function(){return {filter:null,value:this.props.value||""};},componentWillReceiveProps:function(p){if(this.props.hasCustomValue&&p.value!==this.state.value)this.setState({value:p.value});},render:function(){return (k.createElement("input",{className:this.props.className,value:this.state.value,onChange:this._onKeywordInputChange,onKeyPress:this._onKeywordInputEnter,placeholder:this.props.placeholder}));},_changeDebounceTimer:null,_onKeywordInputChange:function(p){var q=p.target.value;this.setState({value:q});if(!q){this.setState({filter:null},this._announceFilterChange);}else{var r=new g(this.props.filterField,i.CONTAIN,q);this.setState({filter:r},this._announceFilterChange);}},_onKeywordInputEnter:function(p){if(p.charCode===j.RETURN)this._announceFilterChangeImmediately();},_announceFilterChangeImmediately:function(){clearInterval(this._changeDebounceTimer);this.props.onChange(this.state.filter);},_announceFilterChange:function(){if(this._changeDebounceTimer)clearInterval(this._changeDebounceTimer);this._changeDebounceTimer=setTimeout(this._announceFilterChangeImmediately,this.props.changeDebounceMS);}});e.exports=o;},null);
__d("ReactSelectorUtils",["ReactChildren"],function(a,b,c,d,e,f,g){var h={processAndMutateMenuItems:function(i,j){var k;g.forEach(i,function(l){if(l){var m=l.props.value===j;l.props.selected=m;if(m)k=l;}});return k;},processAndMutateMultiMenuItems:function(i,j){var k=[];if(j)g.forEach(i,function(l){if(l){var m=j.some(function(n){return n===l.props.value;});l.props.selected=m;if(m)k.push(l);}});return k;}};e.exports=h;},null);
__d("PopoverMenuContextMinWidth",["CSS","Style","copyProperties","cx","shield"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m){"use strict";this._popoverMenu=m;this._popover=m.getPopover();}l.prototype.enable=function(){"use strict";this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',k(this._onSetMenu,this));};l.prototype.disable=function(){"use strict";this._setMenuSubscription.unsubscribe();this._setMenuSubscription=null;if(this._showSubscription){this._showSubscription.unsubscribe();this._showSubscription=null;}if(this._menuSubscription){this._menuSubscription.unsubscribe();this._menuSubscription=null;}};l.prototype._onSetMenu=function(){"use strict";this._menu=this._popoverMenu.getMenu();this._showSubscription=this._popover.subscribe('show',k(this._updateWidth,this));var m=this._updateWidth.bind(this);this._menuSubscription=this._menu.subscribe(['change','resize'],function(){setTimeout(m,0);});this._updateWidth();};l.prototype._updateWidth=function(){"use strict";var m=this._menu.getRoot(),n=this._popoverMenu.getTriggerElem(),o=n.offsetWidth;h.set(m,'min-width',o+'px');g.conditionClass(m,"_575s",o>=m.offsetWidth);};i(l.prototype,{_setMenuSubscription:null,_showSubscription:null,_menuSubscription:null});e.exports=l;},null);
__d("AbstractSelector.react",["InlineBlock.react","React","PopoverMenu.react","ReactSelectorUtils","ContextualLayerAutoFlip","PopoverMenuContextMinWidth","PopoverMenuOverlappingBorder","cloneWithProps","cx","invariant","joinClasses","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=h,t=s.PropTypes;function u(w,x,y){if(w[x]==null)return;var z=Array.isArray(w[x]);if(w.multiple){if(!z)return new Error('You are trying to set a single value for `'+x+'` '+'but the menu has `multiple` set to true, so it should be an '+'array of values.');}else if(z)return new Error('You are trying to set an array of values for `'+x+'` '+'but the menu has `multiple` set to false, so it should be a '+'single value.');}var v=h.createClass({displayName:"AbstractSelector",propTypes:{config:t.object.isRequired,alignh:t.oneOf(['left','center','right']),name:t.string,overlappingborder:t.bool,onChange:t.func,disabled:t.bool,maxheight:t.number,multiple:t.bool,defaultLabel:t.string,defaultValue:u,value:u,initialValue:u},getInitialState:function(){return {value:(this.props.value!=null?this.props.value:this.props.defaultValue!=null?this.props.defaultValue:this.props.initialValue)};},setMenuValue:function(w){p(this.refs&&this.refs.popover);this._internalChange=true;this.refs.popover.getMenu().setValue(w);this._internalChange=false;},onChange:function(w,x){if(this._internalChange)return;if(this.props.value==null){var y=null;if(this.props.multiple){y=x.map(function(z){return z.value;});}else y=x.value;this.setState({value:y});}else this.setMenuValue(this.props.value);if(this.props.onChange)this.props.onChange(x);},componentWillReceiveProps:function(w){if(w.value!=null){this.setState({value:w.value});}else if(this.props.multiple!==w.multiple)this.setState({value:w.multiple?[this.state.value]:this.state.value[0]});},render:function(){var w=this.props.config,x=n(w.menu,{children:this.props.children,className:q("_575t",w.menu.props.className),maxheight:this.props.maxheight,onChange:this.onChange}),y=!this.props.multiple?j.processAndMutateMenuItems(this.props.children,this.state.value):j.processAndMutateMultiMenuItems(this.props.children,this.state.value),z='',aa=null;if(!this.props.multiple){z=y.props.label||y.props.children;if(y.props.icon)aa=n(y.props.icon,{});}else if(!y.length){z=this.props.defaultLabel;}else z=r(y.map(function(ia){return ia.props.children;}),r.CONJUNCTIONS.NONE);var ba={label:z,disabled:this.props.disabled};if(aa)ba.image=aa;var ca=n(w.button,ba),da=[k];if(w.layerBehaviors)da=da.concat(w.layerBehaviors);var ea=[l];if(this.props.overlappingborder)ea.push(m);var fa=null;if(this.props.multiple){var ga=this.props.name+'[]',ha;if(this.state.value)ha=this.state.value.map(function(ia){return (h.createElement("input",{type:"hidden",name:ga,value:ia}));});fa=h.createElement("div",null,ha);}else fa=h.createElement("input",{type:"hidden",name:this.props.name,value:this.state.value});return (h.createElement(g,h.__spread({},this.props,{alignv:"middle",name:null}),h.createElement(i,{ref:"popover",menu:x,alignh:this.props.alignh,layerBehaviors:da,behaviors:ea,disabled:this.props.disabled},ca),fa));},showMenu:function(){p(this.isMounted());this.refs.popover.showPopover();},hideMenu:function(){p(this.isMounted());this.refs.popover.hidePopover();}});e.exports=v;},null);
__d("AbstractPopoverButton.react",["React","URI","cloneWithProps","cx","joinClasses","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g,n=m.PropTypes,o=g.createClass({displayName:"AbstractPopoverButton",propTypes:{config:n.object.isRequired,haschevron:n.bool,maxwidth:n.number},getDefaultProps:function(){return {haschevron:true};},render:function(){var p=this.props.config,q={},r=p.defaultMaxWidth;if(typeof this.props.maxwidth!=='undefined')r=this.props.maxwidth;var s=null;if(r){var t=this.props.haschevron?r-p.chevronWidth:r;if(this.props.label)s={maxWidth:t+'px'};q.style=l(q.style,{maxWidth:r+'px'});}q.image=null;var u=null;if(this.props.image)u=i(this.props.image,{className:'mrs'});if(u||this.props.label)q.label=g.createElement("span",{className:"_55pe",style:s},u,this.props.label);if(this.props.haschevron)q.imageRight=p.chevron;q.className=k(p.button.props.className,"_2agf");q.href=h('#');return i(p.button,q);}});e.exports=o;},null);
__d("XUIPopoverButton.react",["AbstractPopoverButton.react","Image.react","React","XUIButton.react","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=i,o=n.PropTypes,p=i.createClass({displayName:"ReactXUIPopoverButton",propTypes:{haschevron:o.bool,maxwidth:o.number},statics:{getButtonSize:function(q){return q.size||'medium';}},render:function(){var q=p.getButtonSize(this.props),r="_55pi";if(this.props.theme==='dark')r=m(r,(("_5vto")+(q==='small'?' '+"_55_o":'')+(q==='medium'?' '+"_55_p":'')+(q==='large'?' '+"_55_q":'')+(q==='xlarge'?' '+"_55_r":'')+(q==='xxlarge'?' '+"_55_s":'')));var s=this.props.chevron;if(!s){var t=this.props.theme==='dark'||this.props.use==='confirm'||this.props.use==='special'?l('/images/ui/x/button/dark/chevron.png'):l('/images/ui/x/button/normal/chevron.png');s=i.createElement(h,{src:t});}var u={button:i.createElement(j,i.__spread({},this.props,{className:m(this.props.className,r),size:q})),chevron:s,chevronWidth:14,defaultMaxWidth:this.props.maxwidth||200};return (i.createElement(g,{config:u,haschevron:this.props.haschevron,image:this.props.image,label:this.props.label,maxwidth:this.props.maxwidth}));}});e.exports=p;},null);
__d("XUISelectorButton.react",["React","XUIPopoverButton.react","invariant"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"XUISelectorButton",render:function(){i(!this.props.theme);return (g.createElement(h,g.__spread({},this.props,{theme:"dark"})));}});e.exports=j;},null);
__d("XUISelector.react",["AbstractSelector.react","ContextualLayerPositionClassOnContext","React","ReactChildren","ReactXUIMenu","XUISelectorButton.react","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=k.SelectableMenu,o=k.SelectableItem,p=i.createClass({displayName:"ReactXUISelector",statics:{getButtonSize:function(q){return q.size||'medium';}},getDefaultProps:function(){return {haschevron:true,multiple:false};},render:function(){var q,r=[];j.forEach(this.props.children,function(t){if(t)r.push(t);});if(r[0]&&r[0].type===l){q=r[0];r=r.slice(1);}else q=i.createElement(l,{haschevron:this.props.haschevron,disabled:this.props.disabled,use:this.props.use,size:this.props.size,suppressed:this.props.suppressed,maxwidth:this.props.maxwidth});var s={button:q,menu:i.createElement(n,{maxheight:this.props.maxheight,multiple:this.props.multiple}),layerBehaviors:[h]};return (i.createElement(g,i.__spread({},this.props,{ref:"abstractSelector",config:s}),r));},showMenu:function(){m(this.isMounted());this.refs.abstractSelector.showMenu();},hideMenu:function(){m(this.isMounted());this.refs.abstractSelector.hideMenu();}});p.Option=o;e.exports=p;},null);
__d("AdsFilterWidgets.react",["AdsGenericFilter","AdsGenericFilterField","AdsGenericFilterOperator","AdsGenericFilterSet","AdsGenericFilterSetUtil","Layout.react","React","TextInputFilter.brands","XUISelector.react","XUIText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';var s=l.Column,t=l.FillColumn,u=m.createClass({displayName:"FilterWidgets",propTypes:{selectorOptions:m.PropTypes.array,initialSelectorValue:m.PropTypes.string,onSelectorChange:m.PropTypes.func,hasSelector:m.PropTypes.bool.isRequired,onTextChange:m.PropTypes.func,placeholder:m.PropTypes.string,value:m.PropTypes.string,onFilterSetChange:m.PropTypes.func,textFilterField:m.PropTypes.instanceOf(h),selectorFilterField:m.PropTypes.instanceOf(h)},getDefaultProps:function(){return {placeholder:"Search"};},getInitialState:function(){return {filterText:'',selectorValue:this.props.initialSelectorValue,filterSet:null};},componentWillReceiveProps:function(v){if(v.value!==(void 0)&&v.value!==this.state.filterText)this.setState({filterText:v.value});},render:function(){var v=this.props.onFilterSetChange?(m.createElement(n,{className:"_5r_g _1f9c",onChange:this._onTextFilterChange,filterField:this.props.textFilterField})):(m.createElement("input",{className:"_5r_g _1f9c",value:this.state.filterText,onChange:this._onTextChange,placeholder:this.props.placeholder}));if(this.props.hasSelector){return (m.createElement(l,m.__spread({},this.props),m.createElement(t,null,v),m.createElement(s,{className:"_3-9a"},m.createElement(p,{weight:"bold",size:"small",className:"_3-90"},"Filter By:"),m.createElement(o,{size:"large",className:"_5r_h",onChange:this._onSelectorChange,maxheight:300,initialValue:this.props.initialSelectorValue},this.props.selectorOptions))));}else return (m.createElement("div",{className:this.props.className},v));},_onTextChange:function(event){var v=event.target.value;this.setState({filterText:v});this.props.onTextChange(v);},_onSelectorChange:function(v){if(!this.props.onFilterSetChange){this.setState({selectorValue:v.value});this.props.onSelectorChange(v.value);}else{var w=new g(this.props.selectorFilterField,i.EQUAL,v.value);if(w){this._addFilter(w);}else this._removeFilter(this.props.selectorFilterField);}},_onTextFilterChange:function(v){if(v){this._addFilter(v);}else this._removeFilter(this.props.textFilterField);},_addFilter:function(v){var w;if(this.state.filterSet){w=k.mergeByField(this.state.filterSet,new j([v]));}else w=new j([v]);this.setState({filterSet:w},this._announceFilterSetChange);},_removeFilter:function(v){var w=k.excludeFiltersByField(this.state.filterSet,v);this.setState({filterSet:w},this._announceFilterSetChange);},_announceFilterSetChange:function(){this.props.onFilterSetChange(this.state.filterSet);}});e.exports=u;},null);
__d("AdsAssetSelector.react",["AdsAssetSectionType","AdsFilterWidgets.react","AdsLoadState","CenteredContainer.react","CurrentUser","React","Tooltip","XUISpinner.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';var q=l.createClass({displayName:"AdsAssetSelector",propTypes:{assetSections:l.PropTypes.arrayOf(l.PropTypes.shape({name:l.PropTypes.string.isRequired,businessID:l.PropTypes.string.isRequired,assets:l.PropTypes.array.isRequired})).isRequired,bookmarkedAssets:l.PropTypes.array.isRequired,searchedAssets:l.PropTypes.array.isRequired,unownedAssets:l.PropTypes.array.isRequired,unownedAssetsHeader:l.PropTypes.string.isRequired,searchState:l.PropTypes.string.isRequired,searchQuery:l.PropTypes.string,maxListHeight:l.PropTypes.number,searchBarVisible:l.PropTypes.bool.isRequired,onSearch:l.PropTypes.func.isRequired,renderAsset:l.PropTypes.func.isRequired},getDefaultProps:function(){return {searchBarVisible:true};},render:function(){return (l.createElement("div",{className:"_1nmc"},this._renderSearchBar(),l.createElement("div",{className:"_21wq",style:{maxHeight:this.props.maxListHeight||"none"}},this._renderBookmarked(),this._renderUnowned(),this._renderAssetSections(),this._renderSearchSection())));},_renderBookmarked:function(){if(this.props.bookmarkedAssets.length===0)return null;return this._renderSection("Bookmarked",this.props.bookmarkedAssets,null,g.BOOKMARKED);},_renderUnowned:function(){return this._renderSection(this.props.unownedAssetsHeader,this.props.unownedAssets,null,g.UNOWNED);},_renderAssetSections:function(){return this.props.assetSections.map(function(r){return this._renderSection(r.name,r.assets,r.businessID,g.OWNED);}.bind(this));},_renderSection:function(r,s,t,u){if(s.length===0)return null;return (l.createElement("div",{key:r+t},this._renderSectionHeader(r),l.createElement("div",null,s.map(function(v){return this._renderAsset(v,t,u);}.bind(this)))));},_renderSectionHeader:function(r){return (l.createElement("div",l.__spread({className:"_1nme"},m.propsFor(r),{"data-tooltip-position":"right"}),r));},_renderAsset:function(r,s,t){return this.props.renderAsset(r,s,t);},_renderSearchBar:function(){if(!this.props.searchBarVisible)return null;return l.createElement(h,{className:"_1nmd",hasSelector:false,value:this.props.searchQuery,onTextChange:this.props.onSearch});},_renderSearchSection:function(){if(!k.isEmployee()||!this.props.searchQuery)return null;var r=null;switch(this.props.searchState){case i.NOT_LOADED:r=null;break;case i.LOADING:r=(l.createElement(j,{vertical:true,className:"_1nmf"},l.createElement(n,{size:"large"})));break;case i.LOADED:case i.ERROR:if(this.props.searchedAssets&&this.props.searchedAssets.length>0){r=this.props.searchedAssets.map(function(s){return this._renderAsset(s,null,g.SEARCH);}.bind(this));}else r=(l.createElement(j,{vertical:true,className:"_1nmf"},"No items found"));break;}if(r){return (l.createElement("div",null,this._renderSectionHeader("Search By ID (employees only)"),r));}else return null;}});e.exports=q;},null);
__d("generatePaths",["ImmutableObject","invariant"],function(a,b,c,d,e,f,g,h){'use strict';function i(k){return Object.prototype.toString.call(k)==='[object Object]';}function j(k){var l={};k.forEach(function(m){var n=m,o=n.pathKeys,p=n.expandsTo,q=[],r=l;o.forEach(function(s){h(r.hasOwnProperty(s));q=r[s];if(!i(r[s]))r[s]={};r=r[s];});h(Array.isArray(q));Object.keys(p).forEach(function(s){r[s]=[].concat(q,[p[s]]);});h(!r.hasOwnProperty('path'));r.path=q;});return new g(l);}e.exports=j;},null);
__d("ApiPagePaths",["ApiPageFields","generatePaths"],function(a,b,c,d,e,f,g,h){'use strict';var i={DATA:'data'},j=[{pathKeys:[],expandsTo:g},{pathKeys:['PICTURE'],expandsTo:i},{pathKeys:['PICTURE','DATA'],expandsTo:{URL:'url'}},{pathKeys:['USERPERMISSIONS'],expandsTo:i},{pathKeys:['BUSINESSPROJECTS'],expandsTo:i}],k=h(j);e.exports=k;},null);
__d("getByPath",[],function(a,b,c,d,e,f){'use strict';function g(h,i,j){var k=h;for(var l=0;l<i.length;l++){var m=i[l];if(k&&k.hasOwnProperty(m)){k=k[m];}else return j;}return k;}e.exports=g;},null);
__d("ads-page-utils",["ApiPagePaths","PageAdminTypes","PowerEditorConfig","fbt","getByPath"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l={getPageUIName:function(m){return (k(m,g.GLOBAL_BRAND_PAGE_NAME)||k(m,g.NAME)||k(m,g.ID));},canCreateAdsForPage:function(m){if(i.empl_show_all_pages)return true;var n=k(m,g.USERPERMISSIONS.DATA,[]);return n.some(function(o){return o.role===h.MANAGER||o.role===h.CONTENT_CREATOR||o.role===h.MODERATOR||o.role===h.ADVERTISER;});}};f.PageUtils=l;},null);
__d("dotAccess",[],function(a,b,c,d,e,f){function g(h,i,j){var k=i.split('.');do{var l=k.shift();h=h[l]||j&&(h[l]={});}while(k.length&&h);return h;}e.exports=g;},null);
__d("AdsPageAssetSelector.react",["AdsAssetSectionType","AdsAssetSelector.react","AdsLoadState","BusinessAssetGrouping.brands","Image.react","ImageBlock.react","React","Set","Tooltip","areEqual","cx","dotAccess","fbt","ix","ads-page-utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u=b('ads-page-utils').PageUtils,v=("Pages You Don't Own (Employees Only)"),w=m.createClass({displayName:"AdsPageAssetSelector",propTypes:{maxListHeight:m.PropTypes.number,pages:m.PropTypes.array.isRequired,bookmarkedPages:m.PropTypes.array.isRequired,searchedPages:m.PropTypes.array.isRequired,searchBarVisible:m.PropTypes.bool.isRequired,searchState:m.PropTypes.oneOf(Object.keys(i)).isRequired,searchQuery:m.PropTypes.string,selectedPageID:m.PropTypes.string,selectedBusinessID:m.PropTypes.string,selectedSectionType:m.PropTypes.string,showBookmarks:m.PropTypes.bool,unownedPages:m.PropTypes.array.isRequired,onPageSelected:m.PropTypes.func.isRequired,onPageRemoved:m.PropTypes.func.isRequired,onPageBookmarked:m.PropTypes.func.isRequired,onSearch:m.PropTypes.func.isRequired},getDefaultProps:function(){return {showBookmarks:true};},componentWillReceiveProps:function(y){var z=new n();if(!p(this.props.bookmarkedPages,y.bookmarkedPages)){var aa=new n(this.props.bookmarkedPages.map(function(ba){return ba.id;}));y.bookmarkedPages.forEach(function(ba){if(!aa.has(ba.id))z.add(ba.id);});this.setState({recentlyBookmarkedPageIDs:z});}},render:function(){return (m.createElement(h,{assetSections:this._getAssetSections(),bookmarkedAssets:this.props.bookmarkedPages,maxListHeight:this.props.maxListHeight,renderAsset:this._renderAsset,searchedAssets:this.props.searchedPages,searchQuery:this.props.searchQuery,searchState:this.props.searchState,unownedAssets:this._getUnownedPages(),unownedAssetsHeader:v,onSearch:this.props.onSearch,searchBarVisible:this.props.searchBarVisible}));},_getBusinessID:function(y){return y.business?y.business.id||y.business:j.NULL_BIZ_ID;},_filterPage:function(y,z){return (!y||u.getPageUIName(z).toLowerCase().contains(y.toLowerCase())||z.id.contains(y));},_getPageIconURL:function(y){return (r(y,'picture.data.url')||t('images/ads/common/icon_page.png').uri);},_renderAsset:function(y,z,aa){if(!z)z=this._getBusinessID(y);var ba=(this.props.selectedPageID===y.id&&this.props.selectedSectionType===aa),ca=this.props.bookmarkedPages.some(function(fa){return fa.id===y.id;}),da=u.getPageUIName(y),ea=!!(aa===g.BOOKMARKED&&this.state&&this.state.recentlyBookmarkedPageIDs&&this.state.recentlyBookmarkedPageIDs.has(y.id));return (m.createElement(x,{businessID:z,imageSrc:this._getPageIconURL(y),isBookmarked:ca,isRecentlyBookmarked:ea,isSelected:ba,key:y.id+':'+z,name:da,pageID:y.id,sectionType:aa,showBookmark:this.props.showBookmarks,onPageBookmarked:this.props.onPageBookmarked,onPageSelected:this.props.onPageSelected,onPageRemoved:this.props.onPageRemoved}));},_getAssetSections:function(){var y=this.props.pages.filter(function(ba){return this._filterPage(this.props.searchQuery,ba);}.bind(this)),z=j.groupAssets(y,function(ba){return this._getBusinessID(ba);}.bind(this),function(ba){return ba.userpermissions?ba.userpermissions.data:[];},function(ba){return ba.businessprojects?ba.businessprojects.data:[];},function(ba){return ba.name.toLowerCase();},null,j.DEFAULT_NON_BIZ_NAME),aa=[];z.groupedAssets.forEach(function(ba){if(ba.assets.length>0)aa.push({name:ba.name,assets:ba.assets,businessID:ba.bizID});ba.projects.forEach(function(ca){if(ca.assets.length>0)aa.push({name:ca.name,assets:ca.assets,businessID:ba.bizID});});});return aa;},_getUnownedPages:function(){return this.props.unownedPages.filter(function(y){return this._filterPage(this.props.searchQuery,y);}.bind(this));}}),x=m.createClass({displayName:"PageSelectorItem",propTypes:{pageID:m.PropTypes.string.isRequired,imageSrc:m.PropTypes.string.isRequired,isSelected:m.PropTypes.bool.isRequired,isBookmarked:m.PropTypes.bool.isRequired,isRecentlyBookmarked:m.PropTypes.bool.isRequired,businessID:m.PropTypes.string,sectionType:m.PropTypes.oneOf(Object.keys(g)).isRequired,name:m.PropTypes.string.isRequired,showBookmark:m.PropTypes.bool.isRequired,onPageSelected:m.PropTypes.func.isRequired,onPageRemoved:m.PropTypes.func.isRequired,onPageBookmarked:m.PropTypes.func.isRequired},render:function(){var y=(this.props.sectionType===g.BOOKMARKED||this.props.sectionType===g.UNOWNED),z=(!this.props.isBookmarked&&this.props.sectionType===g.OWNED&&this.props.showBookmark),aa=null;if(y){aa=(m.createElement("div",m.__spread({className:"_1wcw"},o.propsFor("Remove Page from this list"),{onClick:this._onRemoveClick,"data-tooltip-position":"right"})));}else if(z)aa=(m.createElement("div",m.__spread({className:"_50a_"},o.propsFor("Bookmark this Page"),{onClick:this._onBookmarkClick,"data-tooltip-position":"right"})));return (m.createElement(l,{className:(("_2sl3")+(this.props.isSelected?' '+"_2246":'')+(this.props.isRecentlyBookmarked?' '+"_50b0":'')),onClick:this._onClick},m.createElement(k,{width:32,height:32,src:this.props.imageSrc}),m.createElement("div",{className:"_1wcv"},m.createElement("div",{className:"_2sl4"},this.props.name),m.createElement("div",{className:"_2sl5"},this.props.pageID),aa)));},_onClick:function(){this.props.onPageSelected(this.props.pageID,this.props.businessID,this.props.sectionType);},_onRemoveClick:function(event){event.preventDefault();event.stopPropagation();this.props.onPageRemoved(this.props.pageID,this.props.sectionType);},_onBookmarkClick:function(event){event.preventDefault();event.stopPropagation();this.props.onPageBookmarked(this.props.pageID);}});e.exports=w;},null);
/**
 * @providesModule underscore.ads
 * @preserve-header
 *
 * Underscore.js 1.5.2
 * ===================

 * > http://underscorejs.org
 * > Underscore may be freely distributed under the MIT license.
 * > (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative
 *   Reporters & Editors

 * Baseline setup
 * --------------
 */__d("underscore.ads",[],function(a,b,c,d,e,f){(function(){var g=this,h=g._,i={},j=Array.prototype,k=Object.prototype,l=Function.prototype,m=j.push,n=j.slice,o=j.concat,p=k.toString,q=k.hasOwnProperty,r=j.forEach,s=j.map,t=j.reduce,u=j.reduceRight,v=j.filter,w=j.every,x=j.some,y=j.indexOf,z=j.lastIndexOf,aa=Array.isArray,ba=Object.keys,ca=l.bind,da=function(ta){if(ta instanceof da)return ta;if(!(this instanceof da))return new da(ta);this._wrapped=ta;};if(typeof f!=='undefined'){if(typeof e!=='undefined'&&e.exports)f=e.exports=da;f._=da;}else g._=da;da.VERSION='1.5.2';var ea=da.each=da.forEach=function(ta,ua,va){if(ta==null)return;if(r&&ta.forEach===r){ta.forEach(ua,va);}else if(ta.length===+ta.length){for(var wa=0,xa=ta.length;wa<xa;wa++)if(ua.call(va,ta[wa],wa,ta)===i)return;}else{var ya=da.keys(ta);for(var wa=0,xa=ya.length;wa<xa;wa++)if(ua.call(va,ta[ya[wa]],ya[wa],ta)===i)return;}};da.map=da.collect=function(ta,ua,va){var wa=[];if(ta==null)return wa;if(s&&ta.map===s)return ta.map(ua,va);ea(ta,function(xa,ya,za){wa.push(ua.call(va,xa,ya,za));});return wa;};var fa='Reduce of empty array with no initial value';da.reduce=da.foldl=da.inject=function(ta,ua,va,wa){var xa=arguments.length>2;if(ta==null)ta=[];if(t&&ta.reduce===t){if(wa)ua=da.bind(ua,wa);return xa?ta.reduce(ua,va):ta.reduce(ua);}ea(ta,function(ya,za,ab){if(!xa){va=ya;xa=true;}else va=ua.call(wa,va,ya,za,ab);});if(!xa)throw new TypeError(fa);return va;};da.reduceRight=da.foldr=function(ta,ua,va,wa){var xa=arguments.length>2;if(ta==null)ta=[];if(u&&ta.reduceRight===u){if(wa)ua=da.bind(ua,wa);return xa?ta.reduceRight(ua,va):ta.reduceRight(ua);}var ya=ta.length;if(ya!==+ya){var za=da.keys(ta);ya=za.length;}ea(ta,function(ab,bb,cb){bb=za?za[--ya]:--ya;if(!xa){va=ta[bb];xa=true;}else va=ua.call(wa,va,ta[bb],bb,cb);});if(!xa)throw new TypeError(fa);return va;};da.find=da.detect=function(ta,ua,va){var wa;ga(ta,function(xa,ya,za){if(ua.call(va,xa,ya,za)){wa=xa;return true;}});return wa;};da.filter=da.select=function(ta,ua,va){var wa=[];if(ta==null)return wa;if(v&&ta.filter===v)return ta.filter(ua,va);ea(ta,function(xa,ya,za){if(ua.call(va,xa,ya,za))wa.push(xa);});return wa;};da.reject=function(ta,ua,va){return da.filter(ta,function(wa,xa,ya){return !ua.call(va,wa,xa,ya);},va);};da.every=da.all=function(ta,ua,va){ua||(ua=da.identity);var wa=true;if(ta==null)return wa;if(w&&ta.every===w)return ta.every(ua,va);ea(ta,function(xa,ya,za){if(!(wa=wa&&ua.call(va,xa,ya,za)))return i;});return !!wa;};var ga=da.some=da.any=function(ta,ua,va){ua||(ua=da.identity);var wa=false;if(ta==null)return wa;if(x&&ta.some===x)return ta.some(ua,va);ea(ta,function(xa,ya,za){if(wa||(wa=ua.call(va,xa,ya,za)))return i;});return !!wa;};da.contains=da.include=function(ta,ua){if(ta==null)return false;if(y&&ta.indexOf===y)return ta.indexOf(ua)!=-1;return ga(ta,function(va){return va===ua;});};da.invoke=function(ta,ua){var va=n.call(arguments,2),wa=da.isFunction(ua);return da.map(ta,function(xa){return (wa?ua:xa[ua]).apply(xa,va);});};da.pluck=function(ta,ua){return da.map(ta,function(va){return va[ua];});};da.where=function(ta,ua,va){if(da.isEmpty(ua))return va?void 0:[];return da[va?'find':'filter'](ta,function(wa){for(var xa in ua)if(ua[xa]!==wa[xa])return false;return true;});};da.findWhere=function(ta,ua){return da.where(ta,ua,true);};da.max=function(ta,ua,va){if(!ua&&da.isArray(ta)&&ta[0]===+ta[0]&&ta.length<65535)return Math.max.apply(Math,ta);if(!ua&&da.isEmpty(ta))return -Infinity;var wa={computed:-Infinity,value:-Infinity};ea(ta,function(xa,ya,za){var ab=ua?ua.call(va,xa,ya,za):xa;ab>wa.computed&&(wa={value:xa,computed:ab});});return wa.value;};da.min=function(ta,ua,va){if(!ua&&da.isArray(ta)&&ta[0]===+ta[0]&&ta.length<65535)return Math.min.apply(Math,ta);if(!ua&&da.isEmpty(ta))return Infinity;var wa={computed:Infinity,value:Infinity};ea(ta,function(xa,ya,za){var ab=ua?ua.call(va,xa,ya,za):xa;ab<wa.computed&&(wa={value:xa,computed:ab});});return wa.value;};da.shuffle=function(ta){var ua,va=0,wa=[];ea(ta,function(xa){ua=da.random(va++);wa[va-1]=wa[ua];wa[ua]=xa;});return wa;};da.sample=function(ta,ua,va){if(arguments.length<2||va)return ta[da.random(ta.length-1)];return da.shuffle(ta).slice(0,Math.max(0,ua));};var ha=function(ta){return da.isFunction(ta)?ta:function(ua){return ua[ta];};};da.sortBy=function(ta,ua,va){var wa=ha(ua);return da.pluck(da.map(ta,function(xa,ya,za){return {value:xa,index:ya,criteria:wa.call(va,xa,ya,za)};}).sort(function(xa,ya){var za=xa.criteria,ab=ya.criteria;if(za!==ab){if(za>ab||za===void 0)return 1;if(za<ab||ab===void 0)return -1;}return xa.index-ya.index;}),'value');};var ia=function(ta){return function(ua,va,wa){var xa={},ya=va==null?da.identity:ha(va);ea(ua,function(za,ab){var bb=ya.call(wa,za,ab,ua);ta(xa,bb,za);});return xa;};};da.groupBy=ia(function(ta,ua,va){(da.has(ta,ua)?ta[ua]:(ta[ua]=[])).push(va);});da.indexBy=ia(function(ta,ua,va){ta[ua]=va;});da.countBy=ia(function(ta,ua){da.has(ta,ua)?ta[ua]++:ta[ua]=1;});da.sortedIndex=function(ta,ua,va,wa){va=va==null?da.identity:ha(va);var xa=va.call(wa,ua),ya=0,za=ta.length;while(ya<za){var ab=(ya+za)>>>1;va.call(wa,ta[ab])<xa?ya=ab+1:za=ab;}return ya;};da.toArray=function(ta){if(!ta)return [];if(da.isArray(ta))return n.call(ta);if(ta.length===+ta.length)return da.map(ta,da.identity);return da.values(ta);};da.size=function(ta){if(ta==null)return 0;return (ta.length===+ta.length)?ta.length:da.keys(ta).length;};da.first=da.head=da.take=function(ta,ua,va){if(ta==null)return void 0;return (ua==null)||va?ta[0]:n.call(ta,0,ua);};da.initial=function(ta,ua,va){return n.call(ta,0,ta.length-((ua==null)||va?1:ua));};da.last=function(ta,ua,va){if(ta==null)return void 0;if((ua==null)||va){return ta[ta.length-1];}else return n.call(ta,Math.max(ta.length-ua,0));};da.rest=da.tail=da.drop=function(ta,ua,va){return n.call(ta,(ua==null)||va?1:ua);};da.compact=function(ta){return da.filter(ta,da.identity);};var ja=function(ta,ua,va){if(ua&&da.every(ta,da.isArray))return o.apply(va,ta);ea(ta,function(wa){if(da.isArray(wa)||da.isArguments(wa)){ua?m.apply(va,wa):ja(wa,ua,va);}else va.push(wa);});return va;};da.flatten=function(ta,ua){return ja(ta,ua,[]);};da.without=function(ta){return da.difference(ta,n.call(arguments,1));};da.uniq=da.unique=function(ta,ua,va,wa){if(da.isFunction(ua)){wa=va;va=ua;ua=false;}var xa=va?da.map(ta,va,wa):ta,ya=[],za=[];ea(xa,function(ab,bb){if(ua?(!bb||za[za.length-1]!==ab):!da.contains(za,ab)){za.push(ab);ya.push(ta[bb]);}});return ya;};da.union=function(){return da.uniq(da.flatten(arguments,true));};da.intersection=function(ta){var ua=n.call(arguments,1);return da.filter(da.uniq(ta),function(va){return da.every(ua,function(wa){return da.indexOf(wa,va)>=0;});});};da.difference=function(ta){var ua=o.apply(j,n.call(arguments,1));return da.filter(ta,function(va){return !da.contains(ua,va);});};da.zip=function(){var ta=da.max(da.pluck(arguments,"length").concat(0)),ua=new Array(ta);for(var va=0;va<ta;va++)ua[va]=da.pluck(arguments,''+va);return ua;};da.object=function(ta,ua){if(ta==null)return {};var va={};for(var wa=0,xa=ta.length;wa<xa;wa++)if(ua){va[ta[wa]]=ua[wa];}else va[ta[wa][0]]=ta[wa][1];return va;};da.indexOf=function(ta,ua,va){if(ta==null)return -1;var wa=0,xa=ta.length;if(va)if(typeof va=='number'){wa=(va<0?Math.max(0,xa+va):va);}else{wa=da.sortedIndex(ta,ua);return ta[wa]===ua?wa:-1;}if(y&&ta.indexOf===y)return ta.indexOf(ua,va);for(;wa<xa;wa++)if(ta[wa]===ua)return wa;return -1;};da.lastIndexOf=function(ta,ua,va){if(ta==null)return -1;var wa=va!=null;if(z&&ta.lastIndexOf===z)return wa?ta.lastIndexOf(ua,va):ta.lastIndexOf(ua);var xa=(wa?va:ta.length);while(xa--)if(ta[xa]===ua)return xa;return -1;};da.range=function(ta,ua,va){if(arguments.length<=1){ua=ta||0;ta=0;}va=arguments[2]||1;var wa=Math.max(Math.ceil((ua-ta)/va),0),xa=0,ya=new Array(wa);while(xa<wa){ya[xa++]=ta;ta+=va;}return ya;};var ka=function(){};da.bind=function(ta,ua){var va,wa;if(ca&&ta.bind===ca)return ca.apply(ta,n.call(arguments,1));if(!da.isFunction(ta))throw new TypeError();va=n.call(arguments,2);return wa=function(){if(!(this instanceof wa))return ta.apply(ua,va.concat(n.call(arguments)));ka.prototype=ta.prototype;var xa=new ka();ka.prototype=null;var ya=ta.apply(xa,va.concat(n.call(arguments)));if(Object(ya)===ya)return ya;return xa;};};da.partial=function(ta){var ua=n.call(arguments,1);return function(){return ta.apply(this,ua.concat(n.call(arguments)));};};da.bindAll=function(ta){var ua=n.call(arguments,1);if(ua.length===0)throw new Error("bindAll must be passed function names");ea(ua,function(va){ta[va]=da.bind(ta[va],ta);});return ta;};da.memoize=function(ta,ua){var va={};ua||(ua=da.identity);return function(){var wa=ua.apply(this,arguments);return da.has(va,wa)?va[wa]:(va[wa]=ta.apply(this,arguments));};};da.delay=function(ta,ua){var va=n.call(arguments,2);return setTimeout(function(){return ta.apply(null,va);},ua);};da.defer=function(ta){return da.delay.apply(da,[ta,1].concat(n.call(arguments,1)));};da.throttle=function(ta,ua,va){var wa,xa,ya,za=null,ab=0;va||(va={});var bb=function(){ab=va.leading===false?0:new Date();za=null;ya=ta.apply(wa,xa);};return function(){var cb=new Date();if(!ab&&va.leading===false)ab=cb;var db=ua-(cb-ab);wa=this;xa=arguments;if(db<=0){clearTimeout(za);za=null;ab=cb;ya=ta.apply(wa,xa);}else if(!za&&va.trailing!==false)za=setTimeout(bb,db);return ya;};};da.debounce=function(ta,ua,va){var wa,xa,ya,za,ab;return function(){ya=this;xa=arguments;za=new Date();var bb=function(){var db=(new Date())-za;if(db<ua){wa=setTimeout(bb,ua-db);}else{wa=null;if(!va)ab=ta.apply(ya,xa);}},cb=va&&!wa;if(!wa)wa=setTimeout(bb,ua);if(cb)ab=ta.apply(ya,xa);return ab;};};da.once=function(ta){var ua=false,va;return function(){if(ua)return va;ua=true;va=ta.apply(this,arguments);ta=null;return va;};};da.wrap=function(ta,ua){return function(){var va=[ta];m.apply(va,arguments);return ua.apply(this,va);};};da.compose=function(){var ta=arguments;return function(){var ua=arguments;for(var va=ta.length-1;va>=0;va--)ua=[ta[va].apply(this,ua)];return ua[0];};};da.after=function(ta,ua){return function(){if(--ta<1)return ua.apply(this,arguments);};};da.keys=ba||function(ta){if(ta!==Object(ta))throw new TypeError('Invalid object');var ua=[];for(var va in ta)if(da.has(ta,va))ua.push(va);return ua;};da.values=function(ta){var ua=da.keys(ta),va=ua.length,wa=new Array(va);for(var xa=0;xa<va;xa++)wa[xa]=ta[ua[xa]];return wa;};da.pairs=function(ta){var ua=da.keys(ta),va=ua.length,wa=new Array(va);for(var xa=0;xa<va;xa++)wa[xa]=[ua[xa],ta[ua[xa]]];return wa;};da.invert=function(ta){var ua={},va=da.keys(ta);for(var wa=0,xa=va.length;wa<xa;wa++)ua[ta[va[wa]]]=va[wa];return ua;};da.functions=da.methods=function(ta){var ua=[];for(var va in ta)if(da.isFunction(ta[va]))ua.push(va);return ua.sort();};da.extend=function(ta){ea(n.call(arguments,1),function(ua){if(ua)for(var va in ua)ta[va]=ua[va];});return ta;};da.pick=function(ta){var ua={},va=o.apply(j,n.call(arguments,1));ea(va,function(wa){if(wa in ta)ua[wa]=ta[wa];});return ua;};da.omit=function(ta){var ua={},va=o.apply(j,n.call(arguments,1));for(var wa in ta)if(!da.contains(va,wa))ua[wa]=ta[wa];return ua;};da.defaults=function(ta){ea(n.call(arguments,1),function(ua){if(ua)for(var va in ua)if(ta[va]===void 0)ta[va]=ua[va];});return ta;};da.clone=function(ta){if(!da.isObject(ta))return ta;return da.isArray(ta)?ta.slice():da.extend({},ta);};da.tap=function(ta,ua){ua(ta);return ta;};var la=function(ta,ua,va,wa){if(ta===ua)return ta!==0||1/ta==1/ua;if(ta==null||ua==null)return ta===ua;if(ta instanceof da)ta=ta._wrapped;if(ua instanceof da)ua=ua._wrapped;var xa=p.call(ta);if(xa!=p.call(ua))return false;switch(xa){case '[object String]':return ta==String(ua);case '[object Number]':return ta!=+ta?ua!=+ua:(ta==0?1/ta==1/ua:ta==+ua);case '[object Date]':case '[object Boolean]':return +ta==+ua;case '[object RegExp]':return ta.source==ua.source&&ta.global==ua.global&&ta.multiline==ua.multiline&&ta.ignoreCase==ua.ignoreCase;}if(typeof ta!='object'||typeof ua!='object')return false;var ya=va.length;while(ya--)if(va[ya]==ta)return wa[ya]==ua;var za=ta.constructor,ab=ua.constructor;if(za!==ab&&!(da.isFunction(za)&&(za instanceof za)&&da.isFunction(ab)&&(ab instanceof ab)))return false;va.push(ta);wa.push(ua);var bb=0,cb=true;if(xa=='[object Array]'){bb=ta.length;cb=bb==ua.length;if(cb)while(bb--)if(!(cb=la(ta[bb],ua[bb],va,wa)))break;}else{for(var db in ta)if(da.has(ta,db)){bb++;if(!(cb=da.has(ua,db)&&la(ta[db],ua[db],va,wa)))break;}if(cb){for(db in ua)if(da.has(ua,db)&&!(bb--))break;cb=!bb;}}va.pop();wa.pop();return cb;};da.isEqual=function(ta,ua){return la(ta,ua,[],[]);};da.isEmpty=function(ta){if(ta==null)return true;if(da.isArray(ta)||da.isString(ta))return ta.length===0;for(var ua in ta)if(da.has(ta,ua))return false;return true;};da.isElement=function(ta){return !!(ta&&ta.nodeType===1);};da.isArray=aa||function(ta){return p.call(ta)=='[object Array]';};da.isObject=function(ta){return ta===Object(ta);};ea(['Arguments','Function','String','Number','Date','RegExp'],function(ta){da['is'+ta]=function(ua){return p.call(ua)=='[object '+ta+']';};});if(!da.isArguments(arguments))da.isArguments=function(ta){return !!(ta&&da.has(ta,'callee'));};if(typeof(/./)!=='function')da.isFunction=function(ta){return typeof ta==='function';};da.isFinite=function(ta){return isFinite(ta)&&!isNaN(parseFloat(ta));};da.isNaN=function(ta){return da.isNumber(ta)&&ta!=+ta;};da.isBoolean=function(ta){return ta===true||ta===false||p.call(ta)=='[object Boolean]';};da.isNull=function(ta){return ta===null;};da.isUndefined=function(ta){return ta===void 0;};da.has=function(ta,ua){return q.call(ta,ua);};da.noConflict=function(){g._=h;return this;};da.identity=function(ta){return ta;};da.times=function(ta,ua,va){var wa=Array(Math.max(0,ta));for(var xa=0;xa<ta;xa++)wa[xa]=ua.call(va,xa);return wa;};da.random=function(ta,ua){if(ua==null){ua=ta;ta=0;}return ta+Math.floor(Math.random()*(ua-ta+1));};var ma={escape:{'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;'}};ma.unescape=da.invert(ma.escape);var na={escape:new RegExp('['+da.keys(ma.escape).join('')+']','g'),unescape:new RegExp('('+da.keys(ma.unescape).join('|')+')','g')};da.each(['escape','unescape'],function(ta){da[ta]=function(ua){if(ua==null)return '';return (''+ua).replace(na[ta],function(va){return ma[ta][va];});};});da.result=function(ta,ua){if(ta==null)return void 0;var va=ta[ua];return da.isFunction(va)?va.call(ta):va;};da.mixin=function(ta){ea(da.functions(ta),function(ua){var va=da[ua]=ta[ua];da.prototype[ua]=function(){var wa=[this._wrapped];m.apply(wa,arguments);return sa.call(this,va.apply(da,wa));};});};var oa=0;da.uniqueId=function(ta){var ua=++oa+'';return ta?ta+ua:ua;};da.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var pa=/(.)^/,qa={"'":"'",'\\':'\\','\r':'r','\n':'n','\t':'t','\u2028':'u2028','\u2029':'u2029'},ra=/\\|'|\r|\n|\t|\u2028|\u2029/g;da.template=function(ta,ua,va){var wa;va=da.defaults({},va,da.templateSettings);var xa=new RegExp([(va.escape||pa).source,(va.interpolate||pa).source,(va.evaluate||pa).source].join('|')+'|$','g'),ya=0,za="__p+='";ta.replace(xa,function(cb,db,eb,fb,gb){za+=ta.slice(ya,gb).replace(ra,function(hb){return '\\'+qa[hb];});if(db)za+="'+\n((__t=("+db+"))==null?'':_.escape(__t))+\n'";if(eb)za+="'+\n((__t=("+eb+"))==null?'':__t)+\n'";if(fb)za+="';\n"+fb+"\n__p+='";ya=gb+cb.length;return cb;});za+="';\n";if(!va.variable)za='with(obj||{}){\n'+za+'}\n';za="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+za+"return __p;\n";try{wa=new Function(va.variable||'obj','_',za);}catch(ab){ab.source=za;throw ab;}if(ua)return wa(ua,da);var bb=function(cb){return wa.call(this,cb,da);};bb.source='function('+(va.variable||'obj')+'){\n'+za+'}';return bb;};da.chain=function(ta){return da(ta).chain();};var sa=function(ta){return this._chain?da(ta).chain():ta;};da.mixin(da);ea(['pop','push','reverse','shift','sort','splice','unshift'],function(ta){var ua=j[ta];da.prototype[ta]=function(){var va=this._wrapped;ua.apply(va,arguments);if((ta=='shift'||ta=='splice')&&va.length===0)delete va[0];return sa.call(this,va);};});ea(['concat','join','slice'],function(ta){var ua=j[ta];da.prototype[ta]=function(){return sa.call(this,ua.apply(this._wrapped,arguments));};});da.extend(da.prototype,{chain:function(){this._chain=true;return this;},value:function(){return this._wrapped;}});}).call(this);},null);
__d("PageVoiceDropdownSelector.react",["AdsLoadState","AdsPageAssetSelector.react","Image.react","ImageBlock.react","React","ReactLayeredComponentMixin","XUIContextualDialog.react","XUIButton.react","underscore.ads","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';var s=k,t=s.PropTypes,u=300,v=k.createClass({displayName:"PageVoiceDropdownSelector",propTypes:{user:t.object.isRequired,permissions:t.object,pages:t.object.isRequired,selectedActorID:t.string,onChange:t.func.isRequired,onClick:t.func.isRequired},mixins:[l],getDefaultProps:function(){return {searchBarVisible:false};},getInitialState:function(){return {dialogShown:false,textDisplay:this._getActorName(this.props.selectedActorID),selectedActorID:this.props.selectedActorID,searchQuery:""};},renderLayers:function(){return {contextualDialog:k.createElement(m,{contextRef:"open-menu-button",shown:this.state.dialogShown,position:"below",alignment:"right",width:m.WIDTH.NORMAL},this._renderLayerContent())};},render:function(){return (k.createElement("div",null,k.createElement(n,{type:"button",className:"_3-8s",ref:"open-menu-button",image:k.createElement(i,{width:16,height:16,src:this._getSelectedImageSource()}),onClick:this._onToggleDialogClick})));},_renderLayerContent:function(){if(o.isEmpty(this.props.user))return null;return k.createElement("div",null,k.createElement(j,{className:(("_2sl3")+(this.props.isSelected?' '+"_2246":'')+(this.props.isRecentlyBookmarked?' '+"_50b0":'')),onClick:function(){this.setState({selectedActorID:this.props.user.id},this._updateSelectedPage);}.bind(this)},k.createElement(i,{width:32,height:32,src:this.props.user.thumbSrc}),k.createElement("div",{className:"_1wcv"},k.createElement("div",{className:"_2sl4"},this.props.user.name),k.createElement("div",{className:"_2sl5"},"Yourself"))),k.createElement(h,{maxListHeight:u,pages:this._getPageSelectorPages(this.props.pages),bookmarkedPages:[],searchedPages:[],searchQuery:this.state.searchQuery,searchState:g.NOT_LOADED,showBookmarks:false,unownedPages:[],onPageSelected:this._onPageSelected,onPageRemoved:function(){},onPageBookmarked:function(){},onSearch:this._onSearch,searchBarVisible:this.props.searchBarVisible}));},_onPageSelected:function(w,x,y){this.setState({selectedActorID:w},this._updateSelectedPage);},_onSearch:function(w){this.setState({searchQuery:w});},_onToggleDialogClick:function(){this.props.onClick();this.setState({dialogShown:!this.state.dialogShown});},_getSelectedImageSource:function(){var w=this.state.selectedActorID;if(!w)return "";if(w===this.props.user.id){if(!this.props.user.thumbSrc)return "";return this.props.user.thumbSrc;}else{if(!this.props.pages[w].thumbSrc)return "";return this.props.pages[w].thumbSrc;}},_getPageSelectorPages:function(w){var x=o.map(w,function(y,z){var aa={id:z,name:y.name,picture:{data:{url:y.thumbSrc}},userpermissions:{data:[{}]}};if(y.businessID)aa.userpermissions.data[0]={business:{name:y.businessName,id:y.businessID}};return aa;},this);r(x[0].id===this.props.user.id);return x.slice(1);},_getActorName:function(w){if(w===this.props.user.id){return this.props.user.name;}else return this.props.pages[w].name;},_updateSelectedPage:function(){var w=this.state.selectedActorID;if(!w)return;this.setState({dialogShown:false});if(w===this.props.user.id){this.setState({textDisplay:this.props.user.name});this.props.onChange({label:this.props.user.name,value:this.props.user.id});}else{this.setState({textDisplay:this.props.pages[w].name});this.props.onChange({label:this.props.pages[w].name,value:w});}}});e.exports=v;},null);
__d("XUIMenuSeparator.react",["MenuSeparator.react"],function(a,b,c,d,e,f,g){var h=g;e.exports=h;},null);
__d("ActorSelector.react",["ContextualLayerBlind","CurrentUser","DOMScroll","Event","Image.react","LayerFadeOnHide","LayerFadeOnShow","PageTransitions","PageVoiceDropdownSelector.react","React","ReactLayeredComponentMixin","ShortProfiles","Tooltip","XUIContextualDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIMenuSeparator.react","XUISelector.react","XUISpinner.react","underscore.ads","cx","ix","fbt","tidyEvent","BrandsAppConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){var fa=y.Option,ga=b('BrandsAppConfig').gk,ha=32,ia=195,ja=500,ka=175,la=16,ma=p.createClass({displayName:"ActorSelector",mixins:[q],propTypes:{actorIDs:p.PropTypes.array.isRequired,actorPermissions:p.PropTypes.object,covered:p.PropTypes.bool,loading:p.PropTypes.bool,nuxBody:p.PropTypes.node,nuxEnabledCovered:p.PropTypes.bool,nuxEnabledUncovered:p.PropTypes.bool,nuxHoverContext:p.PropTypes.object,onChange:p.PropTypes.func.isRequired,onCompleteNux:p.PropTypes.func,selectedActorID:p.PropTypes.string,settingsURI:p.PropTypes.string,showName:p.PropTypes.bool,showNameMaxWidth:p.PropTypes.number,suppressed:p.PropTypes.bool,tooltipConstructor:p.PropTypes.func,tooltipConstructorCovered:p.PropTypes.func},getDefaultProps:function(){return {suppressed:true};},getInitialState:function(){return {actorData:{},clicked:false,nuxShown:false};},componentWillMount:function(){this._fetchActorData();},render:function(){var na=ga.business_identity_page_voice_selector;if(!this.props.selectedActorID||!this.state.actorData[this.props.selectedActorID])return p.createElement("div",null);var oa=this._renderSelectorOptions();if(oa.length<1)return p.createElement("div",null);if(na){return this._renderNewComponent();}else return this._renderOldComponent(oa);},_renderOldComponent:function(na){var oa=this._isCovered();return (p.createElement("span",{className:"_6vh"},p.createElement(z,{className:((!this.props.loading?"hidden_elem":'')+(!this.props.suppressed?' '+"_3-8_":''))}),p.createElement(y,{haschevron:!oa,className:"_6vi",disabled:this.props.loading,maxheight:ia,maxwidth:oa?la:this.props.showName?this.props.showNameMaxWidth:ha,onChange:this.props.onChange,onClick:this._onClickSelector,ref:"selector",suppressed:this.props.suppressed,value:this.props.selectedActorID},na)));},_renderNewComponent:function(na){return (p.createElement(o,{user:aa.values(this.state.actorData)[0],permissions:this.props.actorPermissions,pages:this.state.actorData,onChange:this.props.onChange,onClick:this._onClickSelector,selectedActorID:this.props.selectedActorID,searchBarVisible:true,showName:this.props.showName,showNameMaxWidth:this.props.showNameMaxWidth}));},renderLayers:function(){if(!this.refs.selector)return null;var na=null;if(this.props.settingsURI)na=p.createElement("a",{onClick:this._onClickSettings,style:{verticalAlign:'middle'}},"Post Attribution Settings");if(this.state.nuxShown)i.ensureVisible(this.refs.selector.getDOMNode(),null,ka);return {nux:p.createElement(t,{alignment:"right",behaviors:{ContextualLayerBlind:g,LayerFadeOnHide:l,LayerFadeOnShow:m},hasActionableContext:true,contextRef:"selector",position:"below",shown:this.state.nuxShown,width:t.WIDTH.NORMAL},p.createElement(u,null,this.props.nuxBody),p.createElement(v,{leftContent:na},p.createElement(w,{action:"button",use:"confirm",onClick:this._onCompleteNux})))};},_renderSelectorOptions:function(){var na=[],oa=[];this.props.actorIDs.map(function(ta){if(this._isBusinessManagedActor(ta)){oa.push(ta);}else na.push(ta);}.bind(this));var pa=na.map(this._renderActorOption);if(oa&&oa.length>0){var qa=[],ra=(p.createElement(k,{src:ca('/images/bizsite/busmgr_bookmark_icon_16px.png'),alt:""})),sa=this._groupActorIDsByBusinessID(oa);aa.map(sa,function(ta,ua){qa.push(p.createElement(x,{key:'separator_'+ua}));var va=aa.values(sa[ua])[0],wa=va?this.state.actorData[va].businessName:ua;qa.push(p.createElement(fa,{disabled:true,icon:ra,key:'option_'+ua},wa));aa.map(ta,function(xa){qa.push(this._renderActorOption(xa));}.bind(this));}.bind(this));}pa=pa.concat(qa);return pa;},_renderActorOption:function(na){var oa=this._isCovered(),pa=this.state.actorData[na];if(!pa)return;var qa=!!pa.businessID,ra=p.createElement(k,{className:"_6vg",height:la,src:oa&&h.getID()===na?ca('images/pages/voice/flag.png'):pa.thumbSrc,width:la,alt:""});return (p.createElement(fa,{className:((qa?"plm":'')),icon:ra,key:'actor_'+na,value:na},pa.name));},componentDidMount:function(){this._setTooltip();if(this._canShowNux())if(this.props.nuxHoverContext){var na=ea(j.listen(this.props.nuxHoverContext,'mouseenter',function(){var oa=setTimeout(function(){na.remove();if(this._canShowNux())this.setState({nuxShown:true});}.bind(this),ja),pa=ea(j.listen(this.props.nuxHoverContext,'mouseleave',function(){clearTimeout(oa);pa.remove();}));}.bind(this)));}else this.setState({nuxShown:true});},componentDidUpdate:function(na){if(this.props.actorIDs.toString()!==na.actorIDs.toString())this._fetchActorData();this._setTooltip();},_canShowNux:function(){return (this.props.nuxEnabledCovered&&this._isCovered())||(this.props.nuxEnabledUncovered&&!this._isCovered());},_fetchActorData:function(){r.getMulti(this.props.actorIDs,function(na){this.setState({actorData:na});}.bind(this));},_isCovered:function(){return (this.props.coverEnabled&&!this.state.clicked&&h.getID()===this.props.selectedActorID);},_onClickSelector:function(){this.setState({clicked:true});if(this.state.nuxShown)this._onCompleteNux();},_onClickSettings:function(){this._onCompleteNux();n.go(this.props.settingsURI);},_onCompleteNux:function(){this.setState({nuxShown:false});if(this.props.onCompleteNux)this.props.onCompleteNux({isCovered:this._isCovered()});},_setTooltip:function(){if(!this.refs.selector)return;var na=this.state.actorData[this.props.selectedActorID];if(!na)return;var oa=this._isCovered()&&this.props.tooltipConstructorCovered?this.props.tooltipConstructorCovered:this.props.tooltipConstructor;if(!oa)return;s.set(this.refs.selector.getDOMNode(),oa(na.name),'above','right');},_isBusinessManagedActor:function(na){return (this.state.actorData[na]&&this.state.actorData[na].businessID);},_groupActorIDsByBusinessID:function(na){var oa={};aa.forEach(na,function(pa,qa){var ra=this.state.actorData[qa]?this.state.actorData[qa].businessID:null;if(ra){if(!pa[ra])pa[ra]={};pa[ra][qa]=qa;}}.bind(this,oa));return oa;}});e.exports=ma;},null);
__d("XUFIActorSelectorNuxSeenController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/ufi\/actor_selector\/nux\/seen\/",{is_covered:{type:"Bool",defaultValue:false},is_timeline:{type:"Bool",defaultValue:false}});},null);
__d("UFIActorSelector.react",["ActorSelector.react","Arbiter","AsyncRequest","Parent","React","SubscriptionsHandler","UFICentralUpdates","UFIFeedbackTargets","UFIUserActions","XUFIActorSelectorNuxSeenController","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r='ufi_actor_selector_nux_disabled_event',s=k.createClass({displayName:"UFIActorSelector",propTypes:{actorIDs:k.PropTypes.array.isRequired,ftEntIdentifier:k.PropTypes.string.isRequired,isTimeline:k.PropTypes.bool,nuxEnabledCovered:k.PropTypes.bool,nuxEnabledUncovered:k.PropTypes.bool,nuxHoverContext:k.PropTypes.object,settingsURI:k.PropTypes.string},getInitialState:function(){var t=j.byClass(this.props.nuxHoverContext,'timelineUnitContainer');return {loading:false,nuxEnabledCovered:this.props.nuxEnabledCovered,nuxEnabledUncovered:this.props.nuxEnabledUncovered,nuxHoverContext:t?t:this.props.nuxHoverContext,selectedActorID:null};},render:function(){return (k.createElement(g,{actorIDs:this.props.actorIDs,coverEnabled:true,loading:this.state.loading,nuxBody:this._getNUXBody(),nuxEnabledCovered:this.state.nuxEnabledCovered,nuxEnabledUncovered:this.state.nuxEnabledUncovered,nuxHoverContext:this.state.nuxHoverContext,onChange:this._onChange,onCompleteNux:this._onCompleteNux,selectedActorID:this.state.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this._getTooltipForActorName,tooltipConstructorCovered:this._getCoveredTooltip}));},componentDidMount:function(){this._updateSelectedActorIDFromFeedbackTarget();this._subscriptions=new l();this._subscriptions.addSubscriptions(m.subscribe('feedback-updated',function(t,u){if(this.props.ftEntIdentifier in u.updates)this._updateSelectedActorIDFromFeedbackTarget();}.bind(this)),h.subscribe(r,function(){this.setState({nuxEnabledCovered:false,nuxEnabledUncovered:false});}.bind(this)));},componentWillUnmount:function(){this._subscriptions.release();},_updateSelectedActorIDFromFeedbackTarget:function(){n.getFeedbackTarget(this.props.ftEntIdentifier,function(t){this.setState({loading:false,selectedActorID:t.actorforpost});}.bind(this));},_getNUXBody:function(){return ("Choose whether to like and comment as yourself or as one of the Pages you manage.");},_getTooltipForActorName:function(t){return (q._("Liking and commenting as {actorName}",[q.param("actorName",t)]));},_getCoveredTooltip:function(){return ("Like or comment as one of the Pages you manage.");},_onChange:function(t){this.setState({loading:true});o.changeActor(this.props.ftEntIdentifier,t.value);},_onCompleteNux:function(t){var u=t.isCovered,v=p.getURIBuilder().setBool('is_covered',u).setBool('is_timeline',this.props.isTimeline).getURI();new i().setURI(v).send();h.inform(r);}});e.exports=s;},null);